---
title: "flexdashboard test"
output:
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
    theme: yeti
---

<!-- “default”, “cerulean”, “journal”, “flatly”, “darkly”, “readable”, “spacelab”, “united”, “cosmo”, “lumen”, “paper”, “sandstone”, “simplex”, “yeti” -->

fit_tools: Dashboard for Garmin activities


```{r setup, include=FALSE}
library(flexdashboard)
library(ggplot2)
library(plotly)
library(tidyr)
library(dplyr)
require(scales)
library(knitr)
library(kableExtra)

```

```{r processing, include=FALSE}

fit_table = read.table("c:/Users/nea040/Desktop/c935099c-913d-4a78-8a39-4360510e437c/matt_summarised_data/output_170120.csv", sep=",", header=T)
fit_table$local_date <- as.POSIXct(fit_table$local_date)

# the date contains lots of gaps when I didn't do anything
# want to fill these so it will plot better
# first create a timeseries encompassing the entiure datetimes
ts = seq.POSIXt(min(as.POSIXct(fit_table$local_date, '%Y')), max(as.POSIXct(fit_table$local_date, '%Y')), by='day')

df <- data.frame(local_date=ts)

# now join and force the dates to align
fit_table <- full_join(df, fit_table)

tail(fit_table)

# fill NAs with 0s

fit_table <- fit_table %>% 
  group_by(local_date) %>% 
  mutate_each(funs(ifelse(is.na(.),0,.)))

```

Page 1
=====================================  

Column {data-width=650}
-----------------------------------------------------------------------

### Chart 1

```{r}

plot_mapping <- function(fit_table) {

  cols <- c("mRNA_reads" = "#7CAE00", "rRNA_LSU" = "#C77CFF", "rRNA_SSU" = "#00BFC4")

  p <- ggplot(fit_table, aes(x=date, y=total_distance)) +
    geom_point() +
    ylab("Distance") +
    xlab("Date") 
    
    #scale_x_date(limits = as.Date(c(min(fit_table$local_date), max(fit_table$local_date)))) +
    
    #facet_grid(. ~ year, scales='free_x')

  return(p)

}

fit_table$year <- format(fit_table$local_date, '%Y')
fit_table$date <- as.Date(fit_table$local_date)

p <- plot_mapping(fit_table)
p


```


Column {data-width=350}
-----------------------------------------------------------------------

### Chart B

```{r}

fit_table %>%
  kable() %>%
  kable_styling(fixed_thead=T, bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```


### Chart C

```{r}
  plot(5, 1)
```


Page 2
=====================================  

### Chart 1

```{r}
plot(5, 1)
```
